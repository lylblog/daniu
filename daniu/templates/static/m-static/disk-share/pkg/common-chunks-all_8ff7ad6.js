define("disk-share:widget/system/util/apis.js",function(n,e,i){function o(n){return new Promise(function(e,i){$.getJSON("/pcloud/user/getinfo",{query_uk:n,third:0},function(n){0===n.errno&&n.user_info?e(n.user_info):i(n.show_msg)}).fail(function(){i("fail")})})}function t(n){var e=window.locals.get("__elink_op_user_info");return e?e:o(n).then(function(n){return window.locals.set("__elink_op_user_info",n),n})}i.exports={getUserInfo:o,getUserInfoCache:t}});
;define("disk-share:widget/system/util/elinkThemeRender.js",function(e,t,n){function o(e,t){if(e){var n=$(".module-share-top-bar .g-button[title=保存到网盘]"),o=$("#shareqr .g-button[title=保存到我的百度网盘]");n.remove(),o.remove()}if(t){var r=$(".module-share-top-bar .g-button[title^=下载]"),i=$("#shareqr .g-button[title^=下载]");r.remove(),i.remove()}}n.exports.getTransferAndDownloadStatus=function(e){window.locals.get("Elink_info","Espace_info",function(t,n){function r(e){return t.forbidlist&&-1!==t.forbidlist.indexOf(e)}if(t&&n&&1===t.isElink){var i=r("transfer"),a=r("download");o(i,a),e&&e({cantTransfer:i,cantDownload:a})}else e&&e({cantTransfer:!1,cantDownload:!1})})}});
;define("disk-share:widget/system/util/eCard.js",function(e,t,i){function r(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i="",r=e;r>0;--r)i+=t[Math.floor(Math.random()*t.length)];return i}function a(e){for(var t=0,i=0;i<e.length;i++){var r=e.charAt(i);t+="@"===r||/[a-zA-Z]/.test(r)&&r===r.toUpperCase()||null!=r.match(/[^\x00-\xff]/gi)?2:1}return t}function n(e,t,i,r){var a=l(t),n=l(e);if(!a||!n)return void console.log("不存在",a,"或",n);var s=new f(e),o=a.val();s.setText(o),s.on("success",function(){p.ui.tip({mode:"success",msg:"复制成功！"}),p.log.send({type:"enterprise_disk_business_card_item_click",fromPage:r,cardType:i.card_type===h.enterprise?"enterprise":"staff"})}),s.on("error",function(){p.ui.tip({mode:"caution",msg:"复制失败！",hasClose:!0,autoClose:!1})})}function s(e,t,i,s){this.trigger=l(e)[0];var o=document.createElement("div");o.setAttribute("style","position: absolute; top: 0px; left: 0px; width: 100%;");var c=document.createElement("div"),d="tooltip-"+r(6),f=this;c.className="e-tooltip-wrap "+d,c.innerHTML='        <div class="e-tooltip">			  <input class="value" disabled />			  <div class="btn" role="button" id="e-phone-copy">复制</div>            <div class="e-triangle"></div>        </div>',o.appendChild(c),document.body.appendChild(o),this.el=c,l("."+d+" .value").val(t).attr("size",a(t||5)+1),n("."+d,"."+d+" .value",i,s),this.cancelOpt=!1,this.show=function(e){this.el.style.display="block";var t=e.pageX-e.offsetX+e.target.offsetWidth/2-this.el.offsetWidth/2,i=e.pageY-e.offsetY-this.el.offsetHeight;this.el.style.left=t+"px",this.el.style.top=i+"px"},this.hide=function(){setTimeout(function(){return f.cancelOpt?void(f.cancelOpt=!1):void(f.el.style.display="none")},50)},this.trigger.addEventListener("mouseenter",function(e){f.show(e)}),this.trigger.addEventListener("mouseleave",function(e){f.hide(e)}),this.el.addEventListener("mouseenter",function(){f.cancelOpt=!0}),this.el.addEventListener("mouseleave",function(e){f.hide(e)})}function o(e,t,i,r){e.infos.forEach(function(a){e[a]&&(l(".enterprise-card-mini "+t+"-card ."+a).css("display","inline-block"),new s(".enterprise-card-mini "+t+"-card ."+a,e[a],i,r))}),e.avatar&&l(".avatar .photo-frame img").css({"object-fit":"cover",width:"44px",height:"44px"}).attr("src",e.avatar),e.name&&l(".username").text(e.name),e.intro&&l(".author-desc").text(e.intro),l(".enterprise-card-mini").show()}function c(e,t,i,r){e.infos.forEach(function(s){var o=e[s];o&&(l(".enterprise-card "+t+"-card-detail .e-row."+s).show(),itemPrefix=t+"-"+s,l(itemPrefix+"-value").val(o).attr("size",a(o||5)+1),n(itemPrefix+"-copy",itemPrefix+"-value",i,r))}),e.avatar&&l(".share-person-avatar img").css({"object-fit":"cover"}).attr("src",e.avatar),e.name&&l(".share-person-username").text(e.name),e.intro&&l(".author-intro").text(e.intro)}function d(e,t){var i={},r="",a=e.card_type===h.enterprise?"enriskinfo":"riskinfo",n=e[a];if(n){var s=n.split(";");s.forEach(function(t){e[t]=""})}if(e.card_type===h.enterprise)i={phone:e.enphone,email:e.enemail,address:e.enaddress,avatar:e.logo,name:e.enname},i.infos=["phone","email","address"],r=".ent";else{if(e.card_type!==h.staff)return;i={phone:e.phone,wechat:e.vxnum,email:e.email,avatar:e.avatar,name:e.uname,intro:e.title},i.infos=["phone","wechat","email"],r=".staff"}"sharecode"===t?o(i,r,e,t):(c(i,r,e,t),e.card_type===h.enterprise&&l(".enterprise-info .from-info").hide()),p.log.send({type:"enterprise_disk_business_card_show",fromPage:t,cardType:e.card_type===h.enterprise?"enterprise":"staff"})}var l=e("base:widget/libs/jquerypacket.js"),f=e("base:widget/clipboard/myClipboard.js"),p=e("system-core:context/context.js").instanceForSystem,h={enterprise:2,staff:1};i.exports=d});
;define("disk-share:widget/system/util/ticketBind.js",function(i,n,e){var t=function(){var i=window.locals.get("share_uk"),n=window.locals.get("shareid"),e=window.location.pathname.split("/s/")[1];return e?new Promise(function(t,o){$.get("/api/shorturlinfo",{root:1,uk:i,shareid:n,shorturl:e},function(i){i&&0===i.errno?t(1===i.privilege_type?!0:!1):o(i.show_msg)}).fail(function(){o("fail")})}):Promise.resolve(!1)},o=function(){var i=window.locals.get("share_uk"),n=window.locals.get("shareid");return new Promise(function(e,t){var o={tkappid:1e4,activity_uk:i,activity_id:n};$.post("/ticket/api/getbindinfo",o,function(i){if(i&&0===i.errno){var n=i.data,o=1e3*n.activity_expired<=+new Date;n._isValid=n.remain_count>0&&!o,window.locals.set("bind_info",n),e(n)}else t(i.show_msg)}).fail(function(){t("fail")})})},r=function(){var i=window.locals.get("bind_info");return i?Promise.resolve(i):t().then(function(i){return i?o():null},function(i){return console.error(i),null})};e.exports=r});
;define("disk-share:widget/system/util/makeup.js",function(e,a,s){var t=e("base:widget/libs/jquerypacket.js"),h={share_back:"https://staticiot.cdn.bcebos.com/disk-share%2Fweb_svip_share_code.png",share_head:"#E9C87A",share_hover:"#FDF2E0",share_name:"#64360D",share_text:"#64360D",share_send_button:"#FFFFFF",share_send_text:"#402200",share_page_back:"https://staticiot.cdn.bcebos.com/disk-share%2Fweb_svip_share_list.png",share_page_head:"#F8E0B5",share_page_hover:"#F1C77C",share_page_name:"#402200",share_page_send_button:"#FFD58C",share_page_send_text:"#402200",share_page_text:"#8C7861"},r={themeBack:t(".acss-header .theme-share-back"),themeHead:t(".theme-share-head"),themeName:t(".theme-share-name"),themeText:t(".theme-share-text"),themeNameHover:t(".theme-share-name-hover"),themePageBack:t(".theme-share-page-back"),themePageHead:t(".theme-share-page-head"),themePageName:t(".theme-share-page-name"),themePageHover:t(".theme-share-page-name-hover"),shareLimit:t(".limit-share-lock-icon")},o=function(e){r.themeBack.css({background:"url("+e.share_back+") no-repeat"}),r.themeHead.css({background:e.share_head}),r.themeName.css({color:e.share_name}),r.themeText.css({color:e.share_text}),r.themeNameHover.css({background:e.share_send_button,color:e.share_send_text}),r.themeNameHover.hover(function(){t(this).css({background:e.share_hover})},function(){t(this).css({background:e.share_send_button})}),window.locals.get("sharetype",function(a){a+""=="4"&&r.shareLimit.css({background:e.share_send_button,color:e.share_send_text})})},n=function(e){r.themePageBack.css({background:"url("+e.share_page_back+") no-repeat"}),r.themePageHead.css({borderColor:e.share_page_head}),r.themePageName.css({color:e.share_page_name}),r.themePageHover.css({background:e.share_page_send_button,color:e.share_page_send_text}),r.themePageHover.hover(function(){t(this).css({background:e.share_page_hover})},function(){t(this).css({background:e.share_page_send_button})})};s.exports=function(e,a){var s=1;window.locals.get("share_uk",function(r){t.getJSON("/act/v2/skin/inuse",{uk:r,stype:1001,share_page:s},function(s){var r=h;0===s.errno?(r=t.extend({},h,s.data.web_sharelink||{}),a.log.send({type:"theme-success",value:"加载配置成功",from:s.data.id})):a.log.send({type:"theme-fail-default",value:"加载配置失败显示默认配置"}),"sharecode"===e?o(r):n(r)})})}});
;define("disk-share:widget/system/verifyCodeDialog/newVerify.js",function(e,i,t){var o,n=e("base:widget/libs/jquerypacket.js"),d=e("system-core:context/context.js").instanceForSystem,s=function(){this.token=void 0,this.type=void 0};s.prototype.build=function(){var e=['<div class="download-verify" style="margin-top: 20px;margin-bottom: 20px;padding: 0 28px;text-align: left;font-size: 12px;" id="downloadVerify">',"</div>"],i={title:"添加好友",className:"add-friend",body:e.join(""),draggable:!1,width:"480px",position:{xy:"center"}};"undefined"==typeof o&&(o=d.ui.window(i)),n("#downloadVerify").parents(".dialog").css("width","376px"),o.show()},s.prototype.show=function(i){this.build(),e.async("disk-share:widget/system/verifyCodeDialog/verifyUser.min.js",function(e){new e.VcodeForPC({container:document.getElementById("downloadVerify"),ak:8241,cb:function(e,t){i.onSubmitFunc&&i.onSubmitFunc(e,t),o.hide()}})})},t.exports=new s});
;define("disk-share:widget/system/util/enterpriseThemeRender.js",function(e,r,t){function s(e,r){var t={enterprise:2,staff:1};return e?e.card_type===t.enterprise?"来自企业的分享":"来自企业员工的分享":r?"来自企业的分享":"来自企业员工的分享"}var i=e("base:widget/libs/jquerypacket.js"),a=e("system-core:context/context.js").instanceForSystem,n=e("disk-share:widget/system/util/ticketBind.js"),o=e("disk-share:widget/system/util/eCard.js"),m=e("disk-share:widget/system/util/elinkThemeRender.js"),d=e("disk-share:widget/system/util/apis.js"),h={shareCodeConfig:{fromCertShareText:"来自企业的分享",avatarBg:"#ffffff",themeName:"#ffffff",themeText:"#ffffff",themeDesc:"#ffffff",themeFromCertShare:"10px",themeBtn:{bg:"#0065dd",color:"#ffffff",border:"1px solid #ffffff"},shareCodeBgImg:{img:"https://staticwx.cdn.bcebos.com/mini-program%2Fimages%2Fcertification-user-bg-web.png",normalImg:"https://staticwx.cdn.bcebos.com/mini-program/images/enterprise/web%E5%A4%96%E9%93%BE%E9%A1%B5%E8%83%8C%E6%99%AF.png",size:"100% 100%"},submitBtn:{bg:"#0065dd",color:"#ffffff"},certTip:{top:"225px"},limit:{limitNum:"150px"},tip:{top:"225px"}}},c=function(e,r){var t={tip:i(".tip"),abbrName:i(".verify-user .username"),enterprise:i(".verify-user .enterprise"),vipIcon:i(".verify-user-avatar"),avatarIcon:i(".photo-frame .cert-info"),themeAvatar:i(".theme-share-head"),themeName:i(".theme-share-name"),enterpriseThemeName:i(".enterprise.theme-share-name"),themeFromCertShare:i(".from-cert-share"),themeText:i(".theme-share-text"),themeDesc:i(".author-desc"),themeFriendBtn:i(".verify-btn .verify-friend"),themeSendBtn:i(".verify-btn .verify-send"),avatar:i(".avatar"),submitBtn:i(".submit-a"),certTip:i(".cert-tip"),memo:i(".verify-memo"),memoText:i(".verify-memo-text"),limitShareNum:i(".limit-share-limit-num"),enterpriseRight:i(".enterprise-right"),enterpriseRightIcon:i(".enterprise-right .right-icon"),limitShareLockIcon:i(".limit-share-lock-icon"),verifyBtn:i(".verify-btn")},s=h.shareCodeConfig;t.abbrName.text(e.name),t.themeDesc.text(e.brief),0===e.certStatus&&t.avatarIcon.addClass("cert-icon"),e.isEnterpriseOwner!==!0&&(t.enterprise.text("-"+e.space_name),t.enterprise.css({display:"inline-block",_display:"inline"})),4!==+r&&t.themeFromCertShare.text(s.fromCertShareText),e.memo&&(t.memoText.text("链接备注："+e.memo),t.memo.show(),t.certTip.css({top:s.certTip.top}),t.tip.css({top:s.tip.top}),t.limitShareNum.css({top:s.limit.limitNum})),t.certTip.show(),t.themeAvatar.css({background:s.avatarBg}),t.themeName.css({color:s.themeName}),t.themeText.css({color:s.themeText}),t.themeDesc.css({color:s.themeDesc}),t.themeFromCertShare.css({"font-size":s.themeFromCertShare}),t.themeFriendBtn.css({background:s.themeBtn.bg,color:s.themeBtn.color,border:s.themeBtn.border}),t.themeSendBtn.css({background:s.themeBtn.bg,color:s.themeBtn.color,border:s.themeBtn.border});var a=e.isCertValid?s.shareCodeBgImg.img:s.shareCodeBgImg.normalImg;t.avatar.parent().css({"background-image":"url("+a+")","background-size":s.shareCodeBgImg.size}),t.submitBtn.css({background:s.submitBtn.bg,border:"1px solid "+s.submitBtn.bg}),t.vipIcon.hide(),t.limitShareLockIcon.hide(),t.verifyBtn.hide(),e.isCertValid||t.enterpriseThemeName.hide()},p=function(e){var r={shareContent:i("#bd-main"),shareList:i("#bd-main .bd-left"),sideContent:i(".bd-aside"),sideTopBg:i(".cert-top-banner"),sideBack:i(".theme-share-page-back"),sidePersonInfo:i(".module-share-person-info"),certIcon:i(".share-person-avatar .cert-info"),sharePersonInfoName:i(".share-person-data .share-person-username"),sharePersonInfoIntro:i(".author-desc .author-intro"),sharePersonCertinfo:i(".share-person-certinfo"),themeInfoContnet:i(".module-share-person-info .share-person-inner"),themeAvatar:i(".theme-share-page-head"),themeName:i(".theme-share-page-name"),themeIntro:i(".author-intro"),themePageHover:i(".theme-share-page-name-hover"),themeSubscribe:i(".verb-button"),frameContent:i(".frame-content"),frameMain:i(".frame-main"),certUserShareList:i(".cert-user-share-list"),enterpriseInfo:i(".enterprise-info"),enterpriseInfoFrom:i(".enterprise-info .from-info"),enterprisememo:i(".enterprise-memo"),enterprisememoInfo:i(".enterprise-memo .memo-info"),shareLimit:i(".icon-share-lock"),vipIcon:i(".share-person-data-top .sicon"),lhbButton:i(".btn-img-tips"),verifyFriend:i(".verify-friend"),verifySend:i(".verify-send")};r.frameContent.css({"margin-right":"244px"}),r.frameMain.css({border:"none"}),r.shareContent.css({border:"none"}),r.shareList.css({margin:"0px 250px 0 0",border:"1px solid #e2e2e2"}),r.sideContent.css({width:"230px"}),r.sideTopBg.css({height:"24px",position:"absolute",top:"0px",width:"100%"}),r.sideTopBg.addClass("person-info-top-bg"),r.sideBack.css({background:"#f7f7f7",top:"0px",width:"230px"}),r.sidePersonInfo.css({background:"#fff",height:"100%","box-sizing":"border-box",padding:"10px 16px"}),e.isCertValid&&r.certIcon.addClass("cert-icon"),r.sharePersonInfoName.text(e.name),r.sharePersonInfoIntro.text(e.brief),r.sharePersonCertinfo.show(),r.themeInfoContnet.css({padding:"38px 0 10px 0"}),r.themeAvatar.css({"border-color":"#0065dd"}),r.themeName.css({color:"#333333","font-weight":"bold","max-width":"149px"}),r.themeIntro.css({color:"#666666"}),r.themePageHover.css({background:"#0065dd",color:"#fff"}),r.sidePersonInfo.addClass("is-cert"),e.isCertValid&&r.enterpriseInfoFrom.text("来自："+e.space_name),r.enterpriseInfo.show(),r.shareLimit.hide(),r.lhbButton.hide(),r.verifyFriend.hide(),r.verifySend.hide(),r.vipIcon.hide()},f={1:{name:"基础券",saveNum:"3000"},2:{name:"豪华券",saveNum:"5万"}},l=function(e){i(".cert-user-share-list").text(e).show()},u=function(e){return 1!==window.locals.get("loginstate")&&e.isCertValid?void l(e.shareListBrand):void n().then(function(r){if(r){var t="分享者为您提供了极速下载 单次保存"+f[r.package_type].saveNum+"个文件";i(".cert-user-share-bind-info-head").text(t),i(".cert-user-share-bind-info").addClass(r._isValid?"":"is-disabled").show(),a.log.send(r._isValid?{type:"web_share_list_page_speed_coupon_display",value:"外链页展示绑定企业券权益"}:{type:"web_share_list_page_speed_coupon_not_valid_display",value:"外链页展示绑定企业券权益，已失效"})}else e.isCertValid&&l(e.shareListBrand)},function(e){console.error(e)})};t.exports=function(e,r,t){window.locals.get("Elink_info","Espace_info","card_info",function(a,n,h){if(a&&n){var f={};f.isEnterpriseLink=1===a.isElink,f.memo=a.Elink_memo,f.isEnterpriseOwner=1===n.Espace_op_role,f.certStatus=n.Espace_cert_status||0,f.isCertValid=0===n.Espace_cert_status,f.name=f.isEnterpriseOwner?n.Espace_name:n.Espace_op_name,f.brief=f.isCertValid?n.Espace_brief:"",f.space_name=n.Espace_name,f.opStatus=n.Espace_op_status||0,f.productType=n.Espace_product_type,f.productStatus=n.Espace_product_status,f.shareListBrand=s(h,f.isEnterpriseOwner),i("#bd").addClass("is-enterprise"),f.isCertValid&&i("#bd").addClass("is-cert-valid");var l=a.forbidlist&&-1!==a.forbidlist.indexOf("transfer"),b=a.forbidlist&&-1!==a.forbidlist.indexOf("download");f.isEnterpriseLink&&"sharelist"===e&&(l||b)&&(f.shareListBrand+="（文件仅支持查看）"),f.isEnterpriseLink&&("sharecode"===e?window.locals.get("sharetype",function(e){c(f,e)}):"sharelist"===e&&(u(f),p(f)),f.isCertValid||d.getUserInfoCache(a.Elink_opuk).then(function(r){var t=i("sharecode"===e?".username":".share-person-username"),s=i("sharecode"===e?".avatar .photo-frame img":".share-person-avatar img");t.text(r.uname),s.attr("src",r.avatar_url)})),"sharelist"===e&&m.getTransferAndDownloadStatus(),f.isCertValid&&h&&o(h,e),r(f)}else t()})}});
;define("disk-share:widget/system/util/certThemeRender.js",function(e,r,t){var s=e("base:widget/libs/jquerypacket.js"),o=e("system-core:context/context.js").instanceForSystem,a=e("disk-share:widget/system/util/ticketBind.js"),n=(window.yunData,{shareCodeConfig:{fromCertShareText:"来自企业的分享",avatarBorder:"#C3E9FE",themeName:"#ffffff",themeText:"#ffffff",themeDesc:"#ffffff85",themeFromCertShare:"10px",themeBtn:{bg:"#0065dd",color:"#ffffff",border:"1px solid #ffffff"},shareCodeBgImg:{img:"https://staticwx.cdn.bcebos.com/mini-program%2Fimages%2Fcertification-user-bg-web.png",size:"100% 100%"},submitBtn:{bg:"#0065dd",color:"#ffffff"}}}),i=function(e,r){var t={abbrName:s(".verify-user .username"),avatarIcon:s(".photo-frame .cert-info"),vipIcon:s(".verify-user-avatar"),themeAvatarBorder:s(".theme-share-head"),themeName:s(".theme-share-name"),themeFromCertShare:s(".from-cert-share"),themeText:s(".theme-share-text"),themeDesc:s(".author-desc"),themeFriendBtn:s(".verify-btn .verify-friend"),themeSendBtn:s(".verify-btn .verify-send"),avatar:s(".avatar"),submitBtn:s(".submit-a"),certTip:s(".cert-tip")},o=n.shareCodeConfig;t.abbrName.text(e.abbr_name),t.themeDesc.text(e.cert_info),t.avatarIcon.addClass("cert-icon"),4!==+r&&t.themeFromCertShare.text(o.fromCertShareText),t.themeAvatarBorder.css({background:o.avatarBorder}),t.themeName.css({color:o.themeName}),t.themeText.css({color:o.themeText}),t.themeDesc.css({color:o.themeDesc}),t.themeFromCertShare.css({"font-size":o.themeFromCertShare}),t.themeFriendBtn.css({background:o.themeBtn.bg,color:o.themeBtn.color,border:o.themeBtn.border}),t.themeSendBtn.css({background:o.themeBtn.bg,color:o.themeBtn.color,border:o.themeBtn.border}),t.avatar.parent().css({"background-image":"url("+o.shareCodeBgImg.img+")","background-size":o.shareCodeBgImg.size}),t.submitBtn.css({background:o.submitBtn.bg,border:"1px solid "+o.submitBtn.bg}),t.certTip.show(),t.vipIcon.hide()},h=function(e){var r={shareContent:s("#bd-main"),shareList:s("#bd-main .bd-left"),sideContent:s(".bd-aside"),sideTopBg:s(".cert-top-banner"),sideBack:s(".theme-share-page-back"),sidePersonInfo:s(".module-share-person-info"),certIcon:s(".share-person-avatar .cert-info"),sharePersonInfoName:s(".share-person-data .share-person-username"),sharePersonInfoIntro:s(".author-desc .author-intro"),sharePersonCerinfo:s(".share-person-certinfo"),themeInfoContnet:s(".module-share-person-info .share-person-inner"),themeAvatar:s(".theme-share-page-head"),themeName:s(".theme-share-page-name"),themeIntro:s(".author-intro"),themePageHover:s(".theme-share-page-name-hover"),themeSubscribe:s(".verb-button"),frameContent:s(".frame-content"),frameMain:s(".frame-main"),vipIcon:s(".share-person-data-top .sicon"),certUserShareList:s(".cert-user-share-list")};r.frameContent.css({"margin-right":"244px"}),r.frameMain.css({border:"none"}),r.shareContent.css({border:"none"}),r.shareList.css({margin:"0px 250px 0 0",border:"1px solid #e2e2e2"}),r.sideContent.css({width:"230px"}),r.sideTopBg.css({height:"24px",position:"absolute",top:"0px",width:"100%"}),r.sideTopBg.addClass("person-info-top-bg"),r.sideBack.css({background:"#f7f7f7",top:"0px",width:"230px"}),r.sidePersonInfo.css({background:"#fff",height:"100%","box-sizing":"border-box"}),r.certIcon.addClass("cert-icon"),r.sharePersonInfoName.text(e.abbr_name),r.sharePersonInfoIntro.text(e.cert_info),e.isOwner===!1&&r.sharePersonCerinfo.show(),r.themeInfoContnet.css({padding:"38px 0 10px 0"}),r.themeAvatar.css({"border-color":"#0065dd"}),r.themeName.css({color:"#333333","font-weight":"bold"}),r.themeIntro.css({color:"#666666"}),r.themePageHover.css({background:"#0065dd",color:"#fff"}),r.sidePersonInfo.addClass("is-cert"),r.vipIcon.hide()},c={1:{name:"基础券",saveNum:"3000"},2:{name:"豪华券",saveNum:"5万"}},d=function(){var e=n.shareCodeConfig.fromCertShareText;s(".cert-user-share-list").text(e).show()},m=function(){return 1!==window.locals.get("loginstate")?void d():void a().then(function(e){if(e){var r="分享者为您提供了极速下载 单次保存"+c[e.package_type].saveNum+"个文件";s(".cert-user-share-bind-info-head").text(r),s(".cert-user-share-bind-info").addClass(e._isValid?"":"is-disabled").show(),o.log.send(e._isValid?{type:"web_share_show_coup_bind",value:"外链页展示绑定企业券权益"}:{type:"web_share_show_coup_bind_not_valid",value:"外链页展示绑定企业券权益，已失效"})}else d()},function(e){console.error(e)})};t.exports=function(e,r,t){var o="/api/certuser/get?msg_flag=1&by_op=0&uk="+window.locals.get("share_uk");s.get(o,function(t){var s=t.data||{};s.isCertUser=2===s.cert_status&&0===s.cancel_status,s.isOwner=!!window.locals.get("self"),s.useCertTheme=!1,window.locals.get("Elink_info",function(r){r&&(0===r.isElink&&r.eflag_disable===!1&&(s.useCertTheme=!0),s.isCertUser&&s.useCertTheme&&("sharecode"===e?window.locals.get("sharetype",function(e){i(s,e)}):"sharelist"===e&&(m(),h(s))))}),r(s)},"json").fail(t)}});
;define("disk-share:widget/system/util/getAdList/MD5.js",function(n,r,t){function e(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;for(var t=1732584193,e=-271733879,u=-1732584194,h=271733878,s=0;s<n.length;s+=16){var A=t,d=e,g=u,v=h;t=f(t,e,u,h,n[s+0],7,-680876936),h=f(h,t,e,u,n[s+1],12,-389564586),u=f(u,h,t,e,n[s+2],17,606105819),e=f(e,u,h,t,n[s+3],22,-1044525330),t=f(t,e,u,h,n[s+4],7,-176418897),h=f(h,t,e,u,n[s+5],12,1200080426),u=f(u,h,t,e,n[s+6],17,-1473231341),e=f(e,u,h,t,n[s+7],22,-45705983),t=f(t,e,u,h,n[s+8],7,1770035416),h=f(h,t,e,u,n[s+9],12,-1958414417),u=f(u,h,t,e,n[s+10],17,-42063),e=f(e,u,h,t,n[s+11],22,-1990404162),t=f(t,e,u,h,n[s+12],7,1804603682),h=f(h,t,e,u,n[s+13],12,-40341101),u=f(u,h,t,e,n[s+14],17,-1502002290),e=f(e,u,h,t,n[s+15],22,1236535329),t=i(t,e,u,h,n[s+1],5,-165796510),h=i(h,t,e,u,n[s+6],9,-1069501632),u=i(u,h,t,e,n[s+11],14,643717713),e=i(e,u,h,t,n[s+0],20,-373897302),t=i(t,e,u,h,n[s+5],5,-701558691),h=i(h,t,e,u,n[s+10],9,38016083),u=i(u,h,t,e,n[s+15],14,-660478335),e=i(e,u,h,t,n[s+4],20,-405537848),t=i(t,e,u,h,n[s+9],5,568446438),h=i(h,t,e,u,n[s+14],9,-1019803690),u=i(u,h,t,e,n[s+3],14,-187363961),e=i(e,u,h,t,n[s+8],20,1163531501),t=i(t,e,u,h,n[s+13],5,-1444681467),h=i(h,t,e,u,n[s+2],9,-51403784),u=i(u,h,t,e,n[s+7],14,1735328473),e=i(e,u,h,t,n[s+12],20,-1926607734),t=o(t,e,u,h,n[s+5],4,-378558),h=o(h,t,e,u,n[s+8],11,-2022574463),u=o(u,h,t,e,n[s+11],16,1839030562),e=o(e,u,h,t,n[s+14],23,-35309556),t=o(t,e,u,h,n[s+1],4,-1530992060),h=o(h,t,e,u,n[s+4],11,1272893353),u=o(u,h,t,e,n[s+7],16,-155497632),e=o(e,u,h,t,n[s+10],23,-1094730640),t=o(t,e,u,h,n[s+13],4,681279174),h=o(h,t,e,u,n[s+0],11,-358537222),u=o(u,h,t,e,n[s+3],16,-722521979),e=o(e,u,h,t,n[s+6],23,76029189),t=o(t,e,u,h,n[s+9],4,-640364487),h=o(h,t,e,u,n[s+12],11,-421815835),u=o(u,h,t,e,n[s+15],16,530742520),e=o(e,u,h,t,n[s+2],23,-995338651),t=c(t,e,u,h,n[s+0],6,-198630844),h=c(h,t,e,u,n[s+7],10,1126891415),u=c(u,h,t,e,n[s+14],15,-1416354905),e=c(e,u,h,t,n[s+5],21,-57434055),t=c(t,e,u,h,n[s+12],6,1700485571),h=c(h,t,e,u,n[s+3],10,-1894986606),u=c(u,h,t,e,n[s+10],15,-1051523),e=c(e,u,h,t,n[s+1],21,-2054922799),t=c(t,e,u,h,n[s+8],6,1873313359),h=c(h,t,e,u,n[s+15],10,-30611744),u=c(u,h,t,e,n[s+6],15,-1560198380),e=c(e,u,h,t,n[s+13],21,1309151649),t=c(t,e,u,h,n[s+4],6,-145523070),h=c(h,t,e,u,n[s+11],10,-1120210379),u=c(u,h,t,e,n[s+2],15,718787259),e=c(e,u,h,t,n[s+9],21,-343485551),t=a(t,A),e=a(e,d),u=a(u,g),h=a(h,v)}return Array(t,e,u,h)}function u(n,r,t,e,u,f){return a(h(a(a(r,n),a(e,f)),u),t)}function f(n,r,t,e,f,i,o){return u(r&t|~r&e,n,r,f,i,o)}function i(n,r,t,e,f,i,o){return u(r&e|t&~e,n,r,f,i,o)}function o(n,r,t,e,f,i,o){return u(r^t^e,n,r,f,i,o)}function c(n,r,t,e,f,i,o){return u(t^(r|~e),n,r,f,i,o)}function a(n,r){var t=(65535&n)+(65535&r),e=(n>>16)+(r>>16)+(t>>16);return e<<16|65535&t}function h(n,r){return n<<r|n>>>32-r}function s(n){for(var r=Array(),t=(1<<g)-1,e=0;e<n.length*g;e+=g)r[e>>5]|=(n.charCodeAt(e/g)&t)<<e%32;return r}function A(n){for(var r=d?"0123456789ABCDEF":"0123456789abcdef",t="",e=0;e<4*n.length;e++)t+=r.charAt(n[e>>2]>>e%4*8+4&15)+r.charAt(n[e>>2]>>e%4*8&15);return t}var d=0,g=8,v=function(n){return A(e(s(n),n.length*g))};t.exports=v});
;define("disk-share:widget/system/util/util.js",function(e,n,t){var i=e("system-core:context/context.js").instanceForSystem;t.exports={toFriendlyFileSize:function(e,n){var t=1024,i=t*t,o=i*t,a=o*t,r=1e3*o,s=1e4*o;return n&&"number"==typeof e&&(e/=8),e="number"==typeof e||"string"==typeof e&&/^[\d.]+$/.test(e)?t>e?Math.round(e)+"B":i>e?Math.round(e/t)+"KB":o>e?(e/i).toFixed(1)+"M":r>e?(e/o).toFixed(1)+"G":s>e?Math.round(e/o)+"G":Math.round(e/a)+"T":"-",e=e.replace(".0","")},getFirstWord:function(e){return e?e.substr(0,1).toLocaleUpperCase():""},getSearch:function(e){return((location.search||"").match(new RegExp("[?&]"+e+"=([^&]+)"))||[])[1]||""},makePreviewMusicLogin:function(){i.log.send({name:"web_share_list_preview_music_dialog",value:{value:"外链未登录预览音频-引导登录弹窗展示"}}),i.ui.tip({mode:"caution",msg:"您还未登录，请登录后预览",sticky:!1}),window.yunHeader.login.util.loginNew(),window.yunHeader.on("loginSuccess",function(){i.log.send({name:"web_share_list_preview_music_login_succ",value:{value:"外链未登录预览音频-引导登录成功"}}),location.reload()})},ePermissions:{manage:{code:300,name:"可管理"},share:{code:200,name:"可下载/分享"},preview:{code:100,name:"仅查看"}},eCanManage:function(e){return e===this.ePermissions.manage.code}}});
;define("disk-share:widget/system/errorMsg/errorMsg.js",function(a){var e=a("system-core:context/context.js").instanceForSystem,r={0:"成功","-1":"由于您分享了违反相关法律法规的文件，分享功能已被禁用，之前分享出去的文件不受影响。","-2":"用户不存在,请刷新页面后重试","-3":"文件不存在,请刷新页面后重试","-4":"登录信息有误，请重新登录试试","-5":"host_key和user_key无效","-6":"请重新登录","-7":"该分享已删除或已取消","-8":"该分享已经过期","-9":"访问密码错误","-10":"分享外链已经达到最大上限100000条，不能再次分享","-11":"验证cookie无效","-14":"对不起，短信分享每天限制20条，你今天已经分享完，请明天再来分享吧！","-15":"对不起，邮件分享每天限制20封，你今天已经分享完，请明天再来分享吧！","-16":"对不起，该文件已经限制分享！","-17":"文件分享超过限制","-21":"预置文件无法进行相关操作","-30":"文件已存在","-31":"文件保存失败","-33":"一次支持操作999个，减点试试吧","-32":"你的空间不足了哟","-70":"你分享的文件中包含病毒或疑似病毒，为了你和他人的数据安全，换个文件分享吧",2:"参数错误",3:"未登录或帐号无效",4:"存储好像出问题了，请稍候再试",108:"文件名有敏感词，优化一下吧",110:"分享次数超出限制，可以到“我的分享”中查看已分享的文件链接",114:"当前任务不存在，保存失败",115:"该文件禁止分享",112:'页面已过期，请<a href="javascript:window.location.reload();">刷新</a>后重试',9100:'你的帐号存在违规行为，已被冻结，<a href="/disk/appeal" target="_blank">查看详情</a>',9200:'你的帐号存在违规行为，已被冻结，<a href="/disk/appeal" target="_blank">查看详情</a>',9300:'你的帐号存在违规行为，该功能暂被冻结，<a href="/disk/appeal" target="_blank">查看详情</a>',9400:'你的帐号异常，需验证后才能使用该功能，<a href="/disk/appeal" target="_blank">立即验证</a>',9500:'你的帐号存在安全风险，已进入保护模式，请修改密码后使用，<a href="/disk/appeal" target="_blank">查看详情</a>',90003:"暂无文件夹管理权限"};e.extendErrorMsg(r)});
;define("disk-share:widget/system/fileOperate/fileCreateAndMove.js",function(e,t,i){function s(e,t,i,s,o){for(var a,c,l=[],p=null,f=0,h=t.length;h>f;f++)p=t[f].path,a=r.tools.baseService.parseDirPath(p),c=r.tools.baseService.parseDirFromPath(p),l.push({path:a,dest:i,newname:c});n.post("/api/filemanager?channel=chunlei&clienttype=0&web=1&opera="+e,{filelist:n.stringify(l)},s,"json").error(o)}function o(e,t,i,s,o,c){var l,p,f=r.tools.baseService.parseDirFromPath(e),h="";if(a.test(f))return h="文件名不能包含以下字符：<,>,|,*,?,,/",c(h),!1;if(f.length>0){for(p=0,l=0;p<f.length;p++)f.charCodeAt(p)<128?l++:l+=2;l>255&&(h="文件(夹)名称长度不能超过255字节",c(h))}else h="文件(夹)名称不能为空，请输入文件名称",c(h);h||n.post("/api/create?a=commit",{path:e,isdir:i,size:t,block_list:s?'["'+s+'"]':"[]",method:"post"},o,"json")}var n=e("base:widget/libs/jquerypacket.js"),r=e("system-core:context/context.js").instanceForSystem,a=/[\\\/:*?'<>|]/i;i.exports.createAndMoveTo=function(e,t,i,n){o(e,"",1,null,function(){setTimeout(function(){s("copy"+i,t,e,n)},1e3)})}});
;define("disk-share:widget/system/fileOperate/fileOperate.js",function(l,a,e){var r=l("base:widget/tools/tools.js"),d=l("system-core:context/context.js").instanceForSystem,i=d.pluginControl,m=i.Registry,n=i.BrokerData.getAllData().fileIcon;e.exports.getInfo=function(l,a,e,d,i,o){l=l||"";var c=l.substring(l.lastIndexOf("/")+1),t={fileName:c,name:r.toEntity(c)};if(d)return t.smallIcon="dir-multi-small",t.middleIcon="dir-multi-middle",t.largeIcon="dir-multi-large",t;if(a)return l.match(/^\/apps$/)?(t.smallIcon="dir-apps-small",t.largeIcon="dir-apps-large",t.middleIcon="dir-apps-middle",t.name="我的应用数据",t):l.match(/^\/百度云收藏$/)?(t.smallIcon="dir-cang-small",t.largeIcon="dir-cang-large",t.middleIcon="dir-cang-middle",t.name="我的收藏",t):l.match(/^\/来自PC的备份文件$/)?(t.smallIcon="dir-backup-small",t.largeIcon="dir-backup-large",t.middleIcon="dir-backup-middle",t):l.match(/^\/apps\//)||l.match(/^\/百度云收藏\//)||l.match(/^\/来自PC的备份文件\//)?(t.smallIcon="dir-app-small",t.largeIcon="dir-app-large",t.middleIcon="dir-app-middle",t):l.match(/^cardHolder/)?(t.smallIcon="dir-card-small",t.largeIcon="dir-card-large",t.middleIcon="dir-card-middle",t.name="我的卡包",t):l.match(/^shareHolder/)?(t.smallIcon="dir-share-small",t.largeIcon="dir-share-large",t.middleIcon="dir-share-middle",t.name="共享给我的文件夹",t):i?(t.smallIcon="dir-share-small",t.largeIcon="dir-share-large",t.middleIcon="dir-share-middle",t):(t.smallIcon="dir-small",t.largeIcon="dir-large",t.middleIcon="dir-middle",t);if(1===+o)return t.smallIcon="wp-small",t.largeIcon="wp-large",t.middleIcon="wp-middle",t;t.largeIcon="default-large",t.smallIcon="default-small",t.middleIcon="default-middle";var s=-1!==l.lastIndexOf(".")?r.getFileCategory(l):"*";n[s]&&(3===n[s].length?(t.smallIcon=n[s][0],t.largeIcon=n[s][1],t.middleIcon=n[s][2]):2===n[s].length?(t.smallIcon=n[s][0],t.largeIcon=n[s][1]):(t.smallIcon=n[s],t.largeIcon=n[s]));var g=m.getDefaultPluginIdByExtension(s);return!e&&g&&(g=m.getPluginById(g).name+"@"+m.getOtherInfoById(g).group),t.plugin=g,t};var o=["dir","multi","shouchang","yingyong","yingyong_child","beifen","doc","docx","xls","xlsx","ppt","pptx","pdf","txt","jpg","jpeg","gif","bmp","png","jpe","cur","svg","svgz","tif","tiff","ico","wma","wav","mp3","aac","ra","ram","mp2","ogg","aif","mpega","amr","mid","midi","m4a","wmv","rmvb","mpeg4","mpeg2","flv","avi","3gp","mpga","qt","rm","wmz","wmd","wvx","wmx","wm","swf","mpg","mp4","mkv","mpeg","mov","asf","zip","rar","torrent"];e.exports.isOpenedFile=function(l,a){return a&&"torrent"===l?!1:o.indexOf(l)>=0}});
;define("disk-share:widget/system/util/contextExtend.js",function(e){window.metaData={};var i=window.locals.get("file_list");if(i){var t=e("base:widget/tools/service/tools.format.js").toFriendlyFileSize,r=i[0]||{};window.metaData.file=r,window.metaData.FIRST_FILE_SIZE=r.size?t(r.size):0,window.metaData.FS_ID=r.fs_id+"",window.metaData.FILENAME=r.server_filename}var n=e("system-core:context/context.js").instanceForSystem,s=e("disk-share:widget/system/fileOperate/fileOperate.js"),o=e("disk-share:widget/system/fileOperate/fileCreateAndMove.js"),a=e("system-core:system/uiService/log/log.js"),d=n.ui.list;e("disk-share:widget/system/errorMsg/errorMsg.js"),n.extend({file:{getIconAndPlugin:function(e,i,t){return s.getInfo(e,i,!1,t)},isOpenedFile:function(e,i){return s.isOpenedFile(e,i)},getFileInfo:function(e,i,t,r,n){return s.getInfo(e,i,t,r,n)},createAndMoveTo:o.createAndMoveTo,getPreviewLinkInShare:function(e,i){return e.newdocpreview?i(null,e.newdocpreview):void $.ajax({url:"/share/list",data:{uk:window.locals.get("share_uk"),shareid:window.locals.get("shareid"),web:1,newdocpreview:1,fid:e.fs_id},dataType:"json",success:function(t){0===t.errno?(e.newdocpreview=t.list[0].newdocpreview,i(null,e.newdocpreview)):i(new Error("meet some error"))},error:function(e){i(new Error(e))}})}},ui:{list:function(e,i){var t=d(e,i);return t.extend({resizeScrollBar:function(e){var i=this.$container;if("number"==typeof e||"string"==typeof e?i.height(e):e=i.height(),0===e)throw"[Error] list container's height is 0, need to set";i.height(e);var t=this.listHeader.hasInit===!1?0:52;"none"===i.find(".JDeHdxb").css("display")?(i.find(".NHcGw").height(e-t).find(".scrollbar-tracker").height(e-t-2),i.find(".BNfIyPb").height(e-t).find(".scrollbar-tracker").height(e-t-2)):(i.find(".NHcGw").height(e-73).find(".scrollbar-tracker").height(e-73),i.find(".BNfIyPb").height(e-73).find(".scrollbar-tracker").height(e-73))}}),t}},pageInfo:{currentProduct:"share",currentPage:"share-multi"}}),window.locals.get("Elink_info",function(e){e&&e.isElink&&a.extendDefaultParams({sourceFrom:"enterprise_web_sharelink"})})});
;define("disk-share:widget/system/util/getAdList/fetchAjax.js",function(e,t,i){function s(e,t,i,s){var n=d(a+e+t+i.request_id+i.list[0].id);return e+";"+i.request_id+";"+i.list[0].id+";"+s+";"+n}var n=e("base:widget/libs/jquerypacket.js"),d=e("disk-share:widget/system/util/getAdList/MD5.js"),a="3c27ad3f861ecfd7";i.exports=function(e,t,i,r){var c=0,u=t.list,o=e||"/rest/2.0/pcs/adx",g={},l=function(e,i,r){if(c>u.length-1)return void e({errno:0,data:r});var g=(new Date).getTime(),f=u[c].id,v=d(a+g+f),j={m:"pos",d:"web",p:f,s:g+";"+v,uk:t.uk||window.locals.get("uk"),time:g},p=n.extend({},j,u[c]);n.ajax({type:"GET",url:o,dataType:"json",data:p,success:function(t){r[f]=n.extend({},t),t.list&&(r[f].csign=s(g,f,t,"c"),r[f].vsign=s(g,f,t,"v")),c++,l(e,i,r)},error:function(t){r[f]=n.extend({},t),t.list&&(r[f].csign=s(g,f,t,"c"),r[f].vsign=s(g,f,t,"v")),c++,l(e,i,r)}})};l(i,r,g)}});
;define("disk-share:widget/system/util/adPlatform/adPlatform.tpl.js",function(i,t,a){var n={alljs:["<%= content %>"].join(""),singletext:["<%for(var i=0; i < info.length; i++){%>","<% var item = info[i]%>","<% if (item.ad_warn) {%>",'<sapn class="ad-warn">',"<%- item.ad_warn %>","</sapn>","<%}%>","<% if (item.close) {%>",'<sapn class="ad-close">close</sapn>',"<%}%>",'<a target="<%- isTarget(item.action.action)%>"href="<%- item.action.action %>" title="<%- item.content %>">',"<%- item.content %>","</a>","<%}%>"].join(""),singleimage:["<%for(var i=0; i < info.length; i++){%>","<% var item = info[i]%>","<% if (item.ad_warn) {%>",'<sapn class="ad-warn">',"<%- item.ad_warn %>","</sapn>","<%}%>","<% if (item.close) {%>",'<sapn class="ad-close">close</sapn>',"<%}%>",'<a target="<%- isTarget(item.action.action)%>"href="<%- item.action.action %>" title="<%- item.action.param.title %>"',' style="background:url(<%- item.content %>) no-repeat;height:<%- imgs %>;display:block;">',"</a>","<%}%>"].join(""),multiimage:["<%for(var i=0; i < info.length; i++){%>","<% var item = info[i]%>",'<a target="<%- isTarget(item.action.action)%>"href="<%- item.action.action %>" title="<%- item.action.param.title %>"',' style="display:block;position:absolute;width: 898px;left: 50%;margin-left: -449px;">','<img src="<%- item.content %>" class="share-center" />',"<% if (item.ad_warn) {%>",'<sapn class="ad-warn">',"<%- item.ad_warn %>","</sapn>","<%}%>","<% if (item.close) {%>",'<sapn class="ad-close">close</sapn>',"<%}%>","</a>","<%}%>"].join(""),video:["<video>",'<source src="<%- info.content %>">',"</video>"].join(""),wangmengAside:['(window["cproStyleApi"] = window["cproStyleApi"] || {})','[ "u2380627" ]={at:"3",rsi0:"200",rsi1:"200",pat:"17",tn:"baiduCustNativeAD",','rss1:"#FFFFFF",conBW:"1",adp:"1",ptt:"0",','titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",','titFS:"",rss2:"#000000",titSU:"0"};',"(window.cproArray = window.cproArray || []).push({",'id: "u2380627"',"});"].join(""),wangmengSingle:["(window.cproArray = window.cproArray || []).push({",'id: "u2493175"',"});"].join(""),wangmengBottom:["(window.cproArray = window.cproArray || []).push({",'id: "u2164871"',"});"].join("")};a.exports=n});
;define("disk-share:widget/system/util/adPlatform/adPlatformService.js",function(e,t,a){var n=e("base:widget/libs/jquerypacket.js"),i=e("base:widget/libs/underscore.js"),r=e("system-core:context/context.js").instanceForSystem,o=e("disk-share:widget/system/util/adPlatform/adPlatform.tpl.js"),d={init:function(){d.dealWithAdShow(),d.eventInit()},getFirstItemByNodeId:function(e){return(d.data[e].list||[])[0]||{}},dealWithAdShow:function(){var e=this;i.each(d.data,function(t,a){if(e.checkAd(t))return void(("web-sharelinkpic"===a||"web-sharesinglebanner"===a||"web-sharemultibanner"===a)&&e.createScript(a));var n=t.list&&t.list[0]?t.list[0].type.toLowerCase():"image";d.dealSingleAd(a,n)}),n(".ad-platform-tips").is(":visible")&&r.message.trigger("ad-share-list-single-show")},checkAd:function(e){return null===e||e&&e.error_code},createScript:function(e){var t=document.createElement("div"),a=document.createElement("script"),n=document.createElement("script");if(""===a.innerHTML||""===a.innerHTML)return!1;var i={"web-sharelinkpic":{shareIdStr:"web-right-view",uid:"u2380627",shareTpl:"wangmengAside"},"web-sharesinglebanner":{shareIdStr:"web-single-bottom",uid:"u2493175",shareTpl:"wangmengSingle"},"web-sharemultibanner":{shareIdStr:"web-multi-bottom",uid:"u2164871",shareTpl:"wangmengBottom"}},r=document.getElementById(i[e].shareIdStr||"web-right-view");a.innerHTML=o[i[e].shareTpl||"wangmengAside"],a.type=n.type="text/javascript",n.src=window.location.protocol+"//cpro.baidustatic.com/cpro/ui/c.js",t.id="cpro_"+(i[e].uid||"u2380627"),r.appendChild(t);var d=document.getElementById("cpro_"+(i[e].uid||"u2380627"));d.appendChild(a),d.appendChild(n),a=null,n=null},formatHTTP:function(e){return i.isArray(e)&&e.length>0&&e[0].content?e[0].content=e[0].content.replace(/https?:/gi,window.location.protocol):i.isString(e)&&(e=e.replace(/https?:/gi,window.location.protocol)),e},dealSingleAd:function(e,t){var a="",r=n('.ad-platform-tips[node-id~="'+e+'"]');if("js"===t){var s=d.getFirstItemByNodeId(e);if("baichuan"===s.uid){var l="";l="web-sharemultibanner"===e?['<div style="margin: 0 auto; width: 960px;">',d.base64decode(s.content),"</div>"].join(""):d.base64decode(s.content),r.html(l)}else{t="all"+t;var c=document.createElement("div"),p=document.createElement("script"),u=document.createElement("script");u.type="text/javascript",u.src=window.location.protocol+"//cpro.baidustatic.com/cpro/ui/c.js";var m=i.template(o[t])({content:d.base64decode(s.content)});c.id="cpro_"+(s.uid||"u2380627"),"web-sharemultibanner"===e&&(c.style="margin: 0 auto; width: 960px;"),p.innerHTML=m,r.append(c);var h=n("#cpro_"+(s.uid||"u2380627"));h.append(p),h.append(u),p=null,u=null}}else{"web-sharemultibanner"===e?(t="multi"+t,a=d.data["web-sharelinkrepeat"].list?d.formatHTTP(d.data["web-sharelinkrepeat"].list[0].content):null):(t="single"+t,a="web-sharelinkpic"===e?"200px":"90px");var m=i.template(o[t])({info:d.formatHTTP(d.data[e].list)||[],imgs:a,isTarget:function(e){return-1!==["#","javascript:;","javascript:void(0);"].indexOf(e)?"":"_blank"}});r.append(m)}this.sendViewCallback(e)},eventInit:function(){d.adPlatformTips.on("click",function(e){if(n(e.target).hasClass("ad-close"))n(e.target).parents(".ad-platform-tips").hide(),e&&e.preventDefault(),r.log.send({type:"web_ad_click_close"});else{var t=n(this).attr("node-id");d.sendClickCallback(t)}})},base64decode:function(e){var t,a,n,i,r,o,d,s=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(o=e.length,r=0,d="";o>r;){do t=s[255&e.charCodeAt(r++)];while(o>r&&-1===t);if(-1===t)break;do a=s[255&e.charCodeAt(r++)];while(o>r&&-1===a);if(-1===a)break;d+=String.fromCharCode(t<<2|(48&a)>>4);do{if(n=255&e.charCodeAt(r++),61===n)return d;n=s[n]}while(o>r&&-1===n);if(-1===n)break;d+=String.fromCharCode((15&a)<<4|(60&n)>>2);do{if(i=255&e.charCodeAt(r++),61===i)return d;i=s[i]}while(o>r&&-1===i);if(-1===i)break;d+=String.fromCharCode((3&n)<<6|i)}return d},sendCallback:function(e,t){var a=(new Date).getTime()+e;window[a]=new Image;var n=window[a];if(e){var i=0,r=0;switch(e){case"web-sharelinkpic":i=200,r=200;break;case"web-sharemultibanner":r=910,i=90;break;case"web-sharesinglebanner":r=710,i=90;break;default:return}var o="&h="+i+"&w="+r+"&p="+(e||"web-text")+"&s="+encodeURIComponent(t),d="//pan.baidu.com/rest/2.0/pcs/adx?m=callback"+o;n.onload=n.onerror=function(){window[a]=null},n.src=d,n=null}},sendViewCallback:function(e){var t=d.getFirstItemByNodeId(e);r.log.send({type:"web_show_"+(t.id||"")}),this.sendCallback(e,d.data[e].vsign)},sendClickCallback:function(e){var t=d.getFirstItemByNodeId(e);r.log.send({type:"web_click_"+(t.id||"")}),this.sendCallback(e,d.data[e].csign)}};a.exports.init=function(e){e||(e={}),d.data=e.data||{},d.adPlatformTips=e.AdPlatformTips||{},d.init()}});
;define("disk-share:widget/system/util/adPlatform/adPlatform.js",function(t,i,a){"use strict";var o=t("base:widget/libs/jquerypacket.js"),r=t("disk-share:widget/system/util/adPlatform/adPlatformService.js"),e=t("disk-share:widget/system/util/getAdList/fetchAjax.js"),n=function(){this.AdPlatformTips=o(".ad-platform-tips"),this.config={},this.errorCount=0,this.data={}};n.prototype={getAdResoucre:function(t,i,a){var o=this;t||(t={list:[{id:"web-text",w:0,h:0}]}),t.uk=window.locals.get("uk"),o.data=t,e("/rest/2.0/pcs/adx",t,function(t){t?(i&&"function"==typeof i&&i.call(o,t),o.configInitData(t)):(o.errorCount++,a&&"function"==typeof a&&a.call(o,t),o.errorCallback(t))},function(t){o.errorCount++,a&&"function"==typeof a&&a.call(o,t),o.errorCallback(t)})},configInitData:function(t){this.config.data=t.data,this.config.AdPlatformTips=this.AdPlatformTips,r.init(this.config)},errorCallback:function(t){var i=this;t&&0!==t.errno&&1===i.errorCount&&(i.getAdResoucre(i.data),i.data=null)}},n.init=function(){return new n},a.exports=new n});
;define("disk-share:widget/system/util/getCookies.js",function(e,t,i){i.exports=function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var o=t[i].split("=");if(o[0].trim()===e)return decodeURIComponent(o[1])}}});
;define("disk-share:widget/pageModule/share-person-info/service/adPanLog.js",function(e){var n=e("base:widget/libs/jquerypacket.js"),i=e("system-core:context/context.js").instanceForSystem,a={isOnIframe:!1,type:"",log:{view:function(e){n(window).load(function(){i.log.send({name:"sharePage_AD_plan_"+e+"_show"})})},click:function(e,o){e.find("iframe").hover(function(){a.isOnIframe=!0},function(){a.isOnIframe=!1}),n(window).blur(function(){a.isOnIframe&&i.log.send({name:"sharePage_AD_plan_"+o+"_click"})})},adClick:function(e,n){e.on("click",function(){i.log.send({name:"sharePage_AD_plan_"+n+"_click"})})}}},o=function(){var e=n("#share-ad-box"),i=n('.ad-multi-tips[node-type="share-mutil-bottom"]'),o=e.attr("type")||4,t=i.attr("type")||"";a.log.view(o),a.log.view(t),a.log.click(e,o),a.log.adClick(i,t)};o()});
;define("disk-share:widget/pageModule/share-header/subscribe-outside-link.js",function(i){var e,t=i("base:widget/libs/jquerypacket.js"),s=i("system-core:context/context.js").instanceForSystem,c={conf:{shortUrlData:"",hasSubscribed:!1},api:{querySubscribApi:"/share/subscribe?method=query",addSubscribeApi:"/share/subscribe?method=add",cancelSubscribeApi:"/share/subscribe?method=cancel"},util:{querySubscribInfo:function(){window.locals.get("Elink_info","shareid","share_uk","uk",function(i,e,n,a){var o=1===i.isElink;n===a||o||(c.conf.shortUrlData='[{"uk":'+n+',"share_id":'+e+"}]",t.ajax({type:"post",url:c.api.querySubscribApi,data:{list:c.conf.shortUrlData},dataType:"json",timeout:1e5,success:function(i){if(i&&0===i.errno)try{i.data.list&&i.data.list.length&&0===i.data.list[0].status?(c.util.changeSubscribeBtn(".subscribe-btn","已订阅",!0,{background:"transparent",border:"1px solid #C3EAFF",color:"#06A7FF"}),s.log.send({type:"subscribed_display",value:"已订阅按钮展现"})):s.log.send({type:"subscribe_display",value:"订阅按钮展现"})}catch(e){console.log(e)}t(".subscribe-btn").show(),c.util.handleSubscribeClick(),c.util.subscribeTipsShow()}}))})},addSubscribe:function(){s.log.send({type:"subscribe_clk",value:"订阅按钮点击"});var i=s.ui.tip({mode:"loading",msg:"订阅中..."});t.ajax({type:"post",url:c.api.addSubscribeApi,data:{list:c.conf.shortUrlData},dataType:"json",timeout:1e5,success:function(t){t&&0===t.errno&&t.data&&t.data.length&&0===t.data[0].result?(c.util.changeSubscribeBtn(".subscribe-btn","已订阅",!0,{background:"transparent",border:"1px solid #C3EAFF",color:"#06A7FF"}),i.hide(),c.util.initSuccessDialog(),e.show(),s.log.send({type:"subscribed_display",value:"已订阅按钮展现"}),s.log.send({type:"tc_succeed_display",value:"订阅成功弹窗展现"})):t&&-6===t.errno?(i.hide(),c.util.toLogin()):s.ui.tip({mode:"caution",msg:"订阅失败，请稍后再试",sticky:!1})},error:function(){s.ui.tip({mode:"caution",msg:"订阅失败，请稍后再试",sticky:!1})}})},cancelSubscribe:function(){s.ui.tip({mode:"loading",msg:"取消订阅中..."}),t.ajax({type:"post",url:c.api.cancelSubscribeApi,data:{list:c.conf.shortUrlData},dataType:"json",timeout:1e5,success:function(i){i&&0===i.errno&&i.data&&i.data.length&&0===i.data[0].result?(c.util.changeSubscribeBtn(".subscribe-btn","订阅链接",!1,{background:"#06A7FF",color:"#FFFFFF"}),s.ui.tip({mode:"success",msg:"取消订阅成功",sticky:!1}),s.log.send({type:"subscribe_display",value:"订阅按钮展现"})):s.ui.tip({mode:"caution",msg:"取消订阅失败，请稍后再试",sticky:!1})},error:function(){s.ui.tip({mode:"caution",msg:"取消订阅失败，请稍后再试",sticky:!1})}})},handleSubscribeClick:function(){t(".subscribe-btn").click(function(){locals.get("loginstate",function(i){return 0===i?void c.util.toLogin():void(c.conf.hasSubscribed?(c.util.initCancelDialog(),e.show(),s.log.send({type:"subscribed_clk",value:"已订阅按钮点击"}),s.log.send({type:"tc_cancel_display",value:"取消订阅弹窗展现"})):c.util.addSubscribe())})})},toLogin:function(){window.yunHeader.login.util.loginNew()},changeSubscribeBtn:function(i,e,s,n){t(i).text(e),t(i).css(n),c.conf.hasSubscribed=s},initSuccessDialog:function(){var i={title:"订阅成功",className:"success-subscribe",body:'<div class="success-content">链接更新内容时，您将收到实时通知，可在网盘app「共享-订阅的分享」查看管理链接</div>',draggable:!1,width:"512px",position:{xy:"center"},buttons:[{name:"confirm",title:"我知道了",type:"big",color:"blue",position:"center",padding:[50,50],click:function(){e.hide(),s.log.send({type:"tc_succeed_clk",value:"订阅成功弹窗点击"})}}]};e=s.ui.window(i)},initCancelDialog:function(){var i={title:"取消订阅",className:"cancel-subscribe",body:'<div class="cancel-content">不再订阅此分享后，将不再收到更新内容时的实时通知</div>',draggable:!1,width:"480px",position:{xy:"center"},buttons:[{name:"confirm",title:"继续订阅",type:"big",color:"blue",position:"center",padding:[50,50],click:function(){e.hide(),s.log.send({type:"tc_cancel_2_clk",value:"取消订阅弹窗继续订阅点击"})}},{name:"cancel",title:"不再订阅",type:"big",position:"center",padding:[50,50],click:function(){e.hide(),c.util.cancelSubscribe(),s.log.send({type:"tc_cancel_1_clk",value:"取消订阅弹窗不再订阅点击"})}}]};e=s.ui.window(i)},subscribeTipsShow:function(){var i=localStorage.getItem("has_showsubtips")||!1;i||c.conf.hasSubscribed||(t(".subscribe-tips").show(),setTimeout(function(){localStorage.setItem("has_showsubtips",!0),t(".subscribe-tips").hide()},5e3))}},init:function(){c.util.querySubscribInfo()}};c.init()});
;define("disk-share:widget/pageModule/share-header/btns.js",function(e){var i=e("base:widget/libs/jquerypacket.js"),t=e("system-core:context/context.js").instanceForSystem,a=window.locals.get("file_list")||[],s=a[0]||{},l={obj:{isAlreadyGetLike:!1,shareFileName:""},mod:{like:"a.funcs-tui",share:"div.funcs-share",panel:"#bdshare_panel",shareArea:"span.funcs-share-area"},api:{getLikes:"/pcloud/like/data"},util:{getFileName:function(){l.obj.shareFileName=s.server_filename,"multi_file"===window.SHAREPAGETYPE&&(l.obj.shareFileName+="等")},getLikes:function(){l.obj.isAlreadyGetLike||i.ajax({type:"post",url:l.api.getLikes,data:{type:1,query_uk:window.locals.get("share_uk"),source_id:window.locals.get("shareid")},dataType:"json",timeout:1e5,success:function(e){l.obj.isAlreadyGetLike||e&&0===e.errno&&(l.obj.isAlreadyGetLike=!0,l.util.upDateLike(e))}})},upDateLike:function(e){var t="",a=e.like_count>999?"999+":e.like_count;e&&1===e.like_status?(t="已赞("+a+")",i(l.mod.like).children("em").removeClass("tui_icon")):e&&0===e.like_status&&(t="赞("+a+")",i(l.mod.like).children("em").addClass("tui_icon")),i(l.mod.like).data({count:e.like_count,status:e.like_status}),i(l.mod.like).children("b").text(t)}},bindEvent:function(){i(l.mod.like).on("click",function(){t.log.send({name:"web_share_click_like",value:"外链页点击赞"});var e=i(this);t.message.callPlugin("网盘链接管理-点赞@com.baidu.pan.share",{state:+e.data("status"),sourceUk:window.locals.get("share_uk"),type:0,sourceId:window.locals.get("shareid"),ele:i("#albumTui"),btnDom:e})})},init:function(){l.util.getFileName(),l.bindEvent(),l.util.getLikes()}};l.init()});
;define("disk-share:widget/pageModule/start/preFetchData.js",function(e,t,a){var o=e("base:widget/libs/jquerypacket.js"),n=e("disk-share:widget/system/util/util.js"),s={api:{getCompanyList:"/api/enterprise/organization/allorganizationinfo",showSyncSpace:"/act/api/conf?conf_key=working_space_is_show_share_save",tipsConfApi:"/act/api/conf?conf_key=working_space_share_save_tips",getWorkSpaceStatus:"/workspace/userquery"},util:{mapList:function(e){var t=e.map(function(e){var t=e.orgInfo;return{ciduk:t.ciduk,name:t.name,desc:"空间容量"+n.toFriendlyFileSize(t.company_quota_used)+"/"+n.toFriendlyFileSize(t.company_quota),used:n.toFriendlyFileSize(t.company_quota_used),total:n.toFriendlyFileSize(t.company_quota),cid:t.cid,avator:n.getFirstWord(t.name),brief:t.brief,productType:t.product_type,role:t.role,total_user_num:t.total_user_num,avatorImg:t.logo,certStatus:t.cert_status,cancelCert:t.cancel_status}});return t},preFetchInit:function(){s.util.getCompanyListFn(),s.util.getIsShowSyncSpace(),s.util.getTipsConf(),s.util.queryWorkSpaceUseStatus()},getCompanyListFn:function(){o.ajax({url:s.api.getCompanyList,data:{},type:"get",dataType:"json",success:function(e){var t=e.data,a=[];a=t&&t.length>0?s.util.mapList(t):[],window.locals.set("preFetchCompanyList",a)},error:function(){window.locals.set("preFetchCompanyList",[])}})},getIsShowSyncSpace:function(){o.ajax({url:s.api.showSyncSpace,data:{},type:"get",dataType:"json",success:function(e){0===e.errno&&e.data&&e.data.length?window.locals.set("preFetchIsShowSyncSpace","true"===e.data[0].conf_value.isShow):window.locals.set("preFetchIsShowSyncSpace",!1)},error:function(){window.locals.set("preFetchIsShowSyncSpace",!1)}})},getTipsConf:function(){o.ajax({url:s.api.tipsConfApi,type:"get",dataType:"json",success:function(e){var t=e.data[0].conf_value||{};window.locals.set("preFetchTipsConf",t)},error:function(){window.locals.set("preFetchTipsConf",{})}})},queryWorkSpaceUseStatus:function(){o.ajax({url:s.api.getWorkSpaceStatus,type:"get",dataType:"json",success:function(e){var t=e.data&&!!e.data.is_used;window.locals.set("preFetchIsWorkSpaceUser",t)},error:function(){window.locals.set("preFetchIsWorkSpaceUser",!1)}})}}};a.exports=function(){s.util.preFetchInit()}()});
;define("disk-share:widget/pageModule/share-person-info/share-person-info.js",function(e){var o=e("base:widget/libs/jquerypacket.js"),n=e("base:widget/storage/storage.js"),t=e("system-core:context/context.js").instanceForSystem,i=e("disk-share:widget/system/util/certThemeRender.js"),s=e("disk-share:widget/system/util/enterpriseThemeRender.js"),a=e("disk-share:widget/system/util/getCookies.js");e("disk-share:widget/pageModule/share-person-info/service/adPanLog.js");var l={mod:".module-share-person-info",followBtn:'a[node-type~="share-follow-btn"]',followTxt:'span[node-type~="follow-txt"]',sharePersonInfoTmpl:'textarea[node-type~="tmpl-share-person-info"]',sharePersonNumbers:'ul[node-type="share-person-numbers"]',personIcon:".person-icon",addFriend:".verify-friend",sendMag:".verify-send",subBtn:'button[node-type="verb-button"]',iconLine:".share-person-data-top"},r="立即订阅",d="相互订阅",c="已订阅",u="follow",f="",p={captchatype:void 0,captchaidentity:void 0,normalize:function(e,o){if("string"!=typeof e||0===e.length)return e;if(null===o||"string"!=typeof o)return e;var n,t=-1!==e.indexOf("?"),i=e.substring(e.length-1),s="bdstoken="+o;return n="&"===i||"?"===i?e+s:t?e+"&"+s:e+"?"+s},api:{getInfo:"/subscribe/personalpage/userinfo",subApi:"/subscribe/personalpage/follow",addFollow:"/pcloud/friend/addfollow",removeFollow:"/pcloud/friend/removefollow",userReport:"/api/report/user",addFriend:"/mbox/relation/addfriend"}},w=o(l.mod),g={templatePromise:null,templateReady:!1,templateData:{intro:"",avatar_url:"",pubshare_count:0,album_count:0,follow_count:0,fans_count:0,query_uk:"",follow_class:"",fans_class:"",uname:"",follow_txt:r,btnClass:""},getShareUserIntro:function(){o.ajax({type:"post",url:p.api.getInfo,crossDomain:!0,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",data:{uk:window.locals.get("share_uk")},success:function(e){if(e&&!e.errno){var n=e.user_info;if(n&&n.is_bussiness){var i=o(l.iconLine);o(l.addFriend).hide(),o(l.sendMag).hide(),i.append('<a href="'+n.shop_url+'" class="duxiaomai sicon"><em></em></a>')}if(!window.locals.get("self")){t.log.send({name:"sub_btn_display_count",value:"外链页【订阅】按钮出现的次数用户数"});var s="";n&&n.is_follow?(s="取消订阅",u="cancel",f="cancel"):s="订阅",w.append('<div node-type="verb-info" class="verb-info"><button node-type="verb-button" class="verb-button '+f+'">'+s+"</button></div>")}}}})},addFollow:function(e,n){o.ajax({url:p.normalize(p.api.addFollow,window.locals.get("bdstoken")),type:"post",data:{appid:e.appid||null,follow_uk:e.uk||null,follow_uname:e.uname||null,mark_name:e.mark_name||null,group_id:e.group_id||null},dataType:"json",success:function(e){n(e.errno)}}),this.reportLogger()},delFollow:function(e,n){o.ajax({url:p.normalize(p.api.removeFollow,window.locals.get("bdstoken")),type:"post",data:{follow_uk:e.uk},dataType:"json",success:function(e){n(e.errno)}}),this.reportLogger()},reportLogger:function(e){e=e?e:"web_friend_api",o.ajax({url:p.api.userReport,type:"POST",data:{timestamp:Math.round(new Date/1e3),action:e}})},addFriend:function(e,n){var i=window.locals.get("share_uk"),s=p.api.addFriend+"?uk="+i+"&type=normal&scene=0",a=t.ui.tip({mode:"loading",msg:"发送中..."});o.post(s,e,function(e){a.hide(),n(e)})},disposeAddFriend:function(n,i){var s=this;p.input&&o.extend(n,{input:p.input,vcode:p.vcode}),this.addFriend(n,function(a){if("string"==typeof a)try{a=JSON.parse(a)}catch(l){}if(a&&0===a.errno)return 2===a.status?(o(".verify-friend").css("opacity",.6).html("等待验证"),void i.hide()):(t.ui.tip({mode:"success",msg:"添加好友成功",sticky:!1}),i.hide(),void location.reload());if(a&&2165===a.errno)return void t.ui.tip({mode:"caution",msg:"对方拒绝任何人添加其为好友",sticky:!1});if(a&&2163===a.errno){var r=a.permission.type;if(o(".add-friend").attr("data-type",r),0===+r)i.show();else if(2===+r){var d=a.permission.question;o(".verify-hint").html("问题："+d+"?"),o(".verify-text").attr("maxlength",20),i.show()}}else if(a&&-19===a.errno)i.hide(),e("disk-share:widget/system/verifyCodeDialog/newVerify.js").show({onSubmitFunc:function(e,o){p.captchatype=o,p.captchaidentity=e,s.disposeAddFriend(n)}});else{var c=a.errno,u="";if(-6===c)return void window.yunHeader.login.util.loginNew();switch(c){case 2117:u="好友超出限制了";break;case 2118:u="已经是好友",location.reload();break;case 2115:u="不能添加自己为好友";break;case 2164:u="问题回答错误";break;default:u="加好友太频繁，请稍后再试"}t.ui.tip({mode:"caution",msg:u,sticky:!1})}})},_bindEvent:function(){var e,i=this,s={};this._bindLogEvent(),w.delegate(l.subBtn,"click",function(){t.log.send({name:"sub_btn_click_count",value:"外链页【订阅】按钮被点击的次数用户数"}),o.ajax({type:"post",url:p.api.subApi,crossDomain:!0,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",data:{action:u,uk:window.locals.get("share_uk")},success:function(e){if(!e.errno){var n=o(l.subBtn);"订阅"===n.text()?(n.text("取消订阅"),u="cancel",n.addClass(f)):(n.text("订阅"),u="follow",n.removeClass(f))}}})}),w.delegate(l.followBtn,"click",function(a){var u,f,p=o(a.currentTarget),w=p.find(l.followTxt),g=p.data("followtype"),m={uk:window.locals.get("share_uk"),uname:window.locals.get("linkusername"),appid:123123};return 1!==window.locals.get("loginstate")?(window.yunHeader.login.util.loginNew(),window.yunHeader.on("loginSuccess",function(){n.setItem("followAction","1")}),!1):(p.hasClass("follow")?(m.follow_uname=i.templateData.uname,w.html("订阅中"),p.removeClass("follow").addClass("following"),i.addFollow(m,function(e){e?(w.html(r),p.removeClass("following").addClass("follow"),t.ui.tip(-6===e?{mode:"caution",msg:"订阅失败，用户未登录",sticky:!1}:{mode:"caution",msg:"订阅失败，请刷新后再试",sticky:!1})):1===g?(w.html(d),p.removeClass("following").addClass("mutualfollow").data("followtype",2)):(w.html(c),p.removeClass("following").addClass("followed").data("followtype",0))})):p.hasClass("followed")?(s={title:"取消订阅",className:"un-follow",body:'<div class="content">确定不再订阅“'+m.uname+"”了吗？</br>(取消订阅后你就不能看到TA的分享动态了哦。)</div>",draggable:!1,width:"480px",position:{xy:"center"},buttons:[{name:"confirm",title:"确定",type:"big",color:"blue",position:"center",padding:[50,50],click:function(){u()}},{name:"cancel",title:"取消",type:"big",position:"center",padding:[50,50],click:function(){f()}}]},w.html("取消中"),p.removeClass("followed").addClass("unfollowing"),"undefined"==typeof e&&(e=t.ui.window(s)),e.show(),u=function(){e.hide(),i.delFollow(m,function(e){e?(console.warn("del follow fail"),w.html(c),p.removeClass("unfollowing").addClass("followed")):(w.html(r),p.removeClass("unfollowing").addClass("follow").data("followtype",-1))})},f=function(){e.hide(),w.html(c),p.removeClass("unfollowing").addClass("followed")}):p.hasClass("mutualfollow")&&(s={title:"取消订阅",className:"un-follow",body:'<div class="content">确定不再订阅“'+m.uname+"”了吗？</br>(取消订阅后你就不能看到TA的分享动态了哦。)</div>",draggable:!1,width:"480px",position:{xy:"center"},buttons:[{name:"confirm",title:"确定",type:"big",color:"blue",position:"center",padding:[50,50],click:function(){u()}},{name:"cancel",title:"取消",type:"big",position:"center",padding:[50,50],click:function(){f()}}]},"undefined"==typeof e&&(e=t.ui.window(s)),w.html("取消中"),p.removeClass("mutualfollow").addClass("unfollowing"),e.show(),u=function(){e.hide(),i.delFollow(m,function(e){e?(console.warn("del follow fail"),w.html(d),p.removeClass("unfollowing").addClass("mutualfollow")):(w.html(r),p.removeClass("unfollowing").addClass("follow").data("followtype",1))})},f=function(){w.html(d),p.removeClass("unfollowing").addClass("mutualfollow")}),!1)}),w.delegate(l.addFriend,"click",function(){if(t.log.send({type:"web_share_person_click_add_friend",value:"外链页详情页点击加好友"}),1!==+window.locals.get("loginstate"))return void window.yunHeader.login.util.loginNew();var n="等待验证"===o(this).text();if(!n){var s={title:"添加好友",className:"add-friend",body:'<div class="verify-content"><div class="verify-hint">对方需要你填写验证信息:</div><div class="verify-text-wrap"><textarea class="verify-text" maxlength="40"></textarea></div></div>',draggable:!1,width:"480px",position:{xy:"center"},buttons:[{name:"confirm",title:"确定",type:"big",color:"blue",position:"center",padding:[50,50],click:function(){a()}},{name:"cancel",title:"取消",type:"big",position:"center",padding:[50,50],click:function(){l()}}]};"undefined"==typeof e&&(e=t.ui.window(s));var a=function(){var n=o(".add-friend").data("type"),s=o(".verify-text").val().trim(),a={};if(s.length<1)return void t.ui.tip({mode:"caution",msg:"请填写认证信息",sticky:!1});var l=40;return 0===+n&&(a.text=s),2===+n&&(l=20,a.answer=s),s.length>l?void t.ui.tip({mode:"caution",msg:"输入不能超过"+l+"个字符",sticky:!1}):void i.disposeAddFriend(a,e)},l=function(){e.hide()};i.disposeAddFriend({},e)}}),w.delegate(l.sendMag,"click",function(){t.log.send({type:"web_share_person_click_send_msg",value:"外链页详情页点击发送消息"}),window.open("https://pan.baidu.com/mbox/homepage#share/type=session&fromUk="+window.locals.get("share_uk"))})},_bindLogEvent:function(){w.delegate(".share-person-avatar a","click",function(){}),w.delegate(".share-person-username","click",function(){}),w.delegate(".sicon","click",function(){t.log.send({name:"dlink_personal_info_sicon",value:"外链页个人信息皇冠icon"})})},getIntro:function(){o.get("/pcloud/user/getinfo",{query_uk:window.locals.get("share_uk"),third:0},function(e){if(e&&!e.errno){var n="";e.user_info&&e.user_info.intro&&(n="暂无签名"===e.user_info.intro?"":e.user_info.intro),""!==n&&o(".author-desc .author-intro").text(n)}})},setVipIcon:function(){this.sendReportLoggerHandler("web_share_browse"),window.locals.get("owner_vip_type","owner_vip_level",function(n,i){if(2===n&&i){var s="vipicon-"+n+"-"+i;0===i&&(s+=" cover"),s+=" vipicon",o(".share-person-data .sicon").addClass(s)}2===n&&e("disk-share:widget/system/util/makeup.js")("sharelist",t)})},setCertIcon:function(){var e=this;i("sharelist",function(o){o.isCertUser&&o.useCertTheme?(e.sendReportLoggerHandler("web_enterprise_owner_share_browse"),o.isOwner||t.log.send({name:"understand_cert_share-person_display_count",value:"企业用户分享-外链-头像下-了解企业账号"}),e.setBannerHide()):e.setVipIcon()},function(){e.setVipIcon()})},sendReportLoggerHandler:function(e){1===+window.locals.get("loginstate")&&this.reportLogger(e)},setEnterpriseInfo:function(){var e=this;s("sharelist",function(o){o.isEnterpriseLink?(e.sendReportLoggerHandler("web_enterprise_share_browse"),t.log.send({type:"web_share_list_page_enterprise_display",value:"web-企业空间-文件列表页-展示"}),e.setBannerHide()):e.setCertIcon()},function(){e.setCertIcon()})},setBannerHide:function(){o("#web-right-view").hide(),o("#web-single-bottom").hide(),o("#web-multi-bottom").hide()},init:function(){this.getIntro(),this._bindEvent(),this.setEnterpriseInfo(),window.currentSekey=a("BDCLND")}};t.message.listen("share-person-info",function(e){"show-intro"===e&&g.getShareUserIntro()}),g.init()});
;define("disk-share:widget/pageModule/share-header/share-top-bar/share-top-bar.js",function(e){var r=e("base:widget/libs/jquerypacket.js"),t=e("system-core:context/context.js").instanceForSystem,a=r(".module-share-top-bar");t.Broker.initButtonBroker({name:"shareTools",config:{container:a.find(".bar"),limit:5}})});
;define("disk-share:widget/pageModule/share-header/share-header.js",function(e){function t(){"1"===l.getItem("transferFiles")&&(window.locals.get("self")||r.message.callPlugin("保存到网盘@com.baidu.pan.share"),l.removeItem("transferFiles"))}function a(){"1"===l.getItem("shareAutoDownload")&&(r.message.callPlugin("网盘下载@com.baidu.pan"),l.removeItem("shareAutoDownload"))}var s=e("base:widget/libs/jquerypacket.js"),i=e("base:widget/tools/tools.js"),l=e("base:widget/storage/storage.js"),r=e("system-core:context/context.js").instanceForSystem,o=e("disk-share:widget/system/util/util.js");e("disk-share:widget/pageModule/share-header/btns.js"),e("disk-share:widget/pageModule/share-header/subscribe-outside-link.js");var n=location.pathname.indexOf("/link/")>-1||/(\?|&)linksource=/.test(location.search),d=window.locals.get("file_list")||[],g=d[0]||{},c=i.toEntity(g.server_filename),h="",m=s(".module-share-header .file-name"),u=o.getSearch("pwd")||"",w=1===+g.wpfile;switch(w&&(c=c.replace(/\.(\w*?)$/,""),s("title").text(c+"_免费高速下载|百度网盘-分享无限制")),window.SHAREPAGETYPE){case"single_file_page":h=c.substring(c.lastIndexOf(".")+1).toLowerCase();break;case"multi_file":1===d.length&&g.isdir?h="dir":(h="multi",c+="等")}window.locals.get("cfrom_id","owner_vip_type","sharetype","title_img",function(e,t,a,i){if(r.log.send({name:"web_third_link_page_show",value:{value:"外链页展示",from:Number(e),from0:t,refer:document.referrer}}),r.log.send(u?{type:"web_auto_extract_shareLink_display",value:"自动填充提取码-外链页展示"}:{type:"web_need_extract_shareLink_display",value:"非自动填充提取码-外链页展示"}),"4"===String(a)&&s(".verify-user-protect-share-list").show(),1===d.length&&i&&!n){var l=i?'<img style="vertical-align: top;" src=data:image/png;base64,'+i[0]+">":'<img alt="'+c+'" >';m.attr("title","").html('<em class="global-icon-16 global-icon-16-'+h+'"></em> '+l)}else m.attr("title",c).html('<em class="global-icon-16 global-icon-16-'+h+'"></em> '+c)}),setTimeout(function(){var e=[".panHelperBtn","[data-key=downloadhelper]","[node-type=btn-helper]"],t=s(e.join(","));if(t.length)try{r.log.send({name:"sharePage_plugin_downloadhelper"}),s.each(t,function(e,t){t.remove()})}catch(a){}},1e3),t(),a()});